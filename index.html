<!DOCTYPE HTML>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <script src='https://unpkg.com/tesseract.js@2.0.0-alpha.4/dist/tesseract.min.js'></script>
    </head>
    <body>
        <input type="file" id="file">
        <input type="button" id="go_button" value="Run" />
        <output id="list"></output>
        <div id="ocr_results"> </div>
        <div id="ocr_status"> </div>

        <script>
            var MICR_CHARACTERS = '0123456789abcd';

            const { TesseractWorker } = Tesseract;
            const worker = new TesseractWorker({
                langPath: "./tessdata/",
                tessedit_debug_fonts: 1,
                tessedit_char_whitelist: MICR_CHARACTERS, });

            function handleFileSelect(evt) {
                var files = evt.target.files; // FileList object

                // files is a FileList of File objects. List some properties.
                var output = [];
                for (var i = 0, f; f = files[i]; i++) {
                    worker.recognize(f, "ara", {
                        langPath: "./tessdata/",
                        tessedit_debug_fonts: 1,
                        tessedit_char_whitelist: MICR_CHARACTERS,
                    }).then(function(result) {
                        document.getElementById("ocr_results").innerText = result.text;
                    }).progress(function(result) {
                        document.getElementById("ocr_status").innerText = result["status"] + " (" + (result["progress"] * 100) + "%)";
                    });
                }
            }

            document.getElementById('file').addEventListener('change', handleFileSelect, false);
        </script>
    </body>
</html>
